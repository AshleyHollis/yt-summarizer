name: 'Create Production Deployment Summary'
description: 'Creates a GitHub Actions step summary for production deployments'
inputs:
  image-tag:
    description: 'Docker image tag deployed'
    required: true
  commit-sha:
    description: 'Git commit SHA'
    required: true
  update-overlay-result:
    description: 'Result of update-overlay job'
    required: true
  deploy-frontend-result:
    description: 'Result of deploy-frontend job'
    required: true
  health-check-result:
    description: 'Result of health-check job'
    required: true
runs:
  using: composite
  steps:
    - name: Generate summary
      shell: bash
      env:
        IMAGE_TAG: ${{ inputs.image-tag }}
        COMMIT_SHA: ${{ inputs.commit-sha }}
        UPDATE_OVERLAY_RESULT: ${{ inputs.update-overlay-result }}
        DEPLOY_FRONTEND_RESULT: ${{ inputs.deploy-frontend-result }}
        HEALTH_CHECK_RESULT: ${{ inputs.health-check-result }}
      run: ${{ github.action_path }}/create-prod-summary.sh
