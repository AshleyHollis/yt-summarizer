name: 'Update Production Kustomization'
description: 'Updates production kustomization.yaml with new image tag'
inputs:
  image-tag:
    description: 'Image tag to use for production deployment'
    required: true
  kustomization-path:
    description: 'Path to kustomization overlay'
    required: false
    default: 'k8s/overlays/prod'
  template-path:
    description: 'Path to kustomization template'
    required: false
    default: 'scripts/ci/templates/prod-kustomization-template.yaml'
runs:
  using: composite
  steps:
    - name: Update kustomization file
      shell: bash
      env:
        IMAGE_TAG: ${{ inputs.image-tag }}
        KUSTOMIZATION_PATH: ${{ inputs.kustomization-path }}
        TEMPLATE_PATH: ${{ inputs.template-path }}
      run: bash ${{ github.action_path }}/script.sh
