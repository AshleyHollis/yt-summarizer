# Gitleaks configuration
# https://github.com/gitleaks/gitleaks

title = "yt-summarizer gitleaks config"

[extend]
# Extend the default gitleaks config
useDefault = true

# Allowlist rules for false positives
[allowlist]
  description = "Allowlist for false positives"
  
  # Terraform variable definitions (not actual secrets)
  paths = [
    '''infra/terraform/modules/.*/variables\.tf''',
    '''infra/terraform/environments/.*/variables\.tf''',
    '''infra/terraform/variables\.tf''',
    # Terraform example files
    '''.*\.tfvars\.example''',
    # Test fixtures and test files
    '''.*test.*fixture.*''',
    '''.*__snapshots__.*''',
    '''.*tests/.*''',
    '''.*test\.py''',
    '''.*_test\.py''',
    '''.*conftest\.py''',
    '''.*\.spec\.(ts|js)''',
    # Documentation with example passwords - all docs directories
    '''docs/.*''',
  ]
  
  # Regex patterns that are not secrets
  regexes = [
    # Variable placeholder patterns
    '''var\.(sql_admin_password|admin_password|api_key)''',
    # Terraform variable references
    '''\$\{var\..*password.*\}''',
    # Example/placeholder values
    '''CHANGE_ME|REPLACE_ME|your-.*-here|example-.*''',
    # Documentation example passwords (explicit list)
    '''YourSecurePassword123!''',
    '''YourStrong@Passw0rd''',
    # Generic example password patterns
    '''Password=Your.*''',
    '''password.*=.*Your.*''',
    # Test API keys (not real)
    '''sk-test-.*''',
    '''sk-fake-.*''',
    '''test-key.*''',
  ]
